spring:
  main:
    allow-circular-references: true
  security:
    user:
      name: oracleai
      password: oracleai

  web:
    resources:
      static-locations: classpath:/static/

  mvc:
    cors:
      allowed-origin-patterns: ["*"]  # ✅ Allow all origins
      allowed-methods: ["GET", "POST", "PUT", "DELETE", "OPTIONS"]
      allowed-headers: ["*"]

  servlet:
    websocket:
      buffer-size: 65536  # ✅ Increase WebSocket buffer size
    multipart:
      enabled: true
      max-file-size: 200MB
      max-request-size: 200MB

  cloud:
    oci:
      config:
        enabled: false  # Disable OCI auto-configuration by default
        type: FILE
        # Uncomment and configure the following when you have OCI config file
        # profile: DEFAULT
        # file: ~/.oci/config

  datasource:
    url: ${DB_URL:jdbc:oracle:thin:@localhost:1521/FREEPDB1}
    username: ${DB_USER:admin}
    password: ${DB_PASSWORD:password}
    driver-class-name: oracle.jdbc.OracleDriver
    hikari:
      maximum-pool-size: ${DB_POOL_SIZE:10}
      connection-timeout: 30000
      idle-timeout: 600000
      max-lifetime: 1800000

  ai:
    openai:
      api-key: ${OPENAI_API_KEY:your-api-key-here}
      base-url: ${OPENAI_BASE_URL:https://api.openai.com}
      chat:
        options:
          model: ${OPENAI_CHAT_MODEL:gpt-3.5-turbo}
          temperature: 0.7
      embedding:
        options:
          model: ${OPENAI_EMBEDDING_MODEL:text-embedding-ada-002}

vectorrag:
  table-name: ${VECTORRAG_TABLE_NAME:vector_store}
  drop-at-startup: ${VECTORRAG_DROP_AT_STARTUP:false}
  distance-metric: ${VECTORRAG_DISTANCE_METRIC:COSINE}
  temp-dir: ${VECTORRAG_TEMP_DIR:tempDir}
  
#logging:
#  level:
#    root: INFO
#    org.springframework.web: DEBUG
#    org.springframework.web.cors: DEBUG
#    org.springframework.web.socket: DEBUG
#    org.hibernate.SQL: DEBUG
#    org.hibernate.type.descriptor.sql.BasicBinder: TRACE

server:
  port: ${SERVER_PORT:80}
#  port: 8444
#  port: 443
  tomcat:
    max-swallow-size: 200MB
  ssl:
    enabled: ${SSL_ENABLED:false}
    key-store-type: PKCS12
    key-store: ${SSL_KEY_STORE:classpath:aiholo2org.p12}
    key-store-password: ${SSL_KEY_STORE_PASSWORD:Welcome1}
    key-alias: ${SSL_KEY_ALIAS:aiholoorg}

---
# Development profile - disables OCI services
spring:
  config:
    activate:
      on-profile: dev
  cloud:
    oci:
      config:
        enabled: false
